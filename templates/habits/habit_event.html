<!-- habits/templates/habits/habit_event.html -->

{% extends 'website/base.html' %}

{% block title %}Habit Events{% endblock title %}

{% block content %}
<div class="container">
    <div class="d-flex flex-row justify-content-around">
        <h1>Habit Events</h1>
        <a href="{% url 'habits:overview' %}" class="btn btn-outline-primary m-2">< Overview</a>
    </div>
    <!-- Visualizzazione degli eventi abituali -->
    <ul class="my-5">
        {% for habit_event, edit_habit_event_form in habit_event_form_dict.items %}
            <li class="d-flex flex-row justify-content-around">
                <span class="mx-2 flex-grow-1 fs-3 bold">{{ habit_event.habit }}</span>
                <span class="mx-2 flex-grow-1 fs-3 bold">{{ habit_event.date }}</span>
                <span class="mx-2 flex-grow-1 fs-3 bold">{{ habit_event.time }}</span>
                <span class="mx-2 flex-grow-1 fs-3 bold">{{ habit_event.completed }}</span>
                <span class="mx-2 flex-grow-1 fs-3 bold">{{ habit_event.location }}</span>
                <button type="button" class="m-1 btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#editForm-{{ habit_event.id }}">Modify</button>
                
                <form action="{% url 'habits:delete_habit_event' habit_event.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="m-1 btn btn-danger">Delete</button>
                </form>
            </li>
            <div id="editForm-{{ habit_event.id }}" class="collapse">
                <h6>Modify Habit Event</h6>
                <form action="{% url 'habits:edit_habit_event' habit_event.id %}" method="post">
                    {% csrf_token %}
                    {{ edit_habit_event_form.as_p }} {# Utilizzo il form di modifica corrispondente all'evento abituale #}
                    <button type="submit" class="m-1 btn btn-outline-primary">Save</button>
                </form>
            </div>
            <hr class="my-1">
        {% endfor %}
        
    </ul>
    <!-- Form per la creazione di un nuovo evento abituale -->
    <h4>Create new habit event</h4>
    <form action="{% url 'habits:create_habit_event' %}" method="post">
        {% csrf_token %}
        {{ habit_event_form.as_p }}
        <button type="submit" class="btn btn-outline-success">Create</button>
    </form>
</div>
{% endblock %}
